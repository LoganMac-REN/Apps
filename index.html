<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Grocery List</title>

  <!-- React & ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

  <!-- Babel (compile JSX in the browser) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body { font-family: system-ui, sans-serif; background:#fafafa; margin:0; padding:1em; }
    h1 { margin-top:0; }
    .controls { margin-bottom:1em; display:flex; gap:0.5em; }
    input[type="text"] { flex:1; padding:0.5em; border:1px solid #ccc; border-radius:8px; }
    button { padding:0.5em 1em; border:1px solid #ccc; border-radius:8px; background:white; }
    ul { list-style:none; padding:0; }
    li { background:white; padding:0.75em; margin:0.25em 0; border:1px solid #ddd; border-radius:8px; display:flex; align-items:center; gap:0.5em; }
    li.done span { text-decoration:line-through; color:#999; }
  </style>
</head>
<body>
  <h1>Grocery List</h1>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function GroceryListApp() {
      const STORAGE_KEY = "groceryList";
      const DEFAULT_ITEMS = [
        { text:"Unsalted butter (120 g)", done:false },
        { text:"Kinder Chocolate", done:false },
        { text:"Parchment paper", done:false },
        { text:"Small Ziplock bags", done:false }
      ];

      const [items, setItems] = useState(() => {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          return raw ? JSON.parse(raw) : DEFAULT_ITEMS;
        } catch { return DEFAULT_ITEMS; }
      });
      const [text, setText] = useState("");

      useEffect(() => {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
      }, [items]);

      function addItem() {
        const t = text.trim();
        if (!t) return;
        setItems([...items, { text: t, done: false }]);
        setText("");
      }
      function toggle(i) {
        setItems(items.map((it, idx) => idx === i ? { ...it, done: !it.done } : it));
      }
      function clearChecked() {
        setItems(items.filter(it => !it.done));
      }
      function reset() {
        setItems(DEFAULT_ITEMS);
      }

      return (
        <div>
          <div className="controls">
            <input value={text} onChange={e=>setText(e.target.value)}
                   onKeyDown={e=> e.key==="Enter" && addItem()}
                   placeholder="Add an itemâ€¦" />
            <button onClick={addItem}>Add</button>
            <button onClick={clearChecked}>Clear checked</button>
            <button onClick={reset}>Reset</button>
          </div>
          <ul>
            {items.map((it, i) => (
              <li key={i} className={it.done ? "done" : ""}>
                <input type="checkbox" checked={it.done} onChange={()=>toggle(i)} />
                <span>{it.text}</span>
              </li>
            ))}
          </ul>
          <p style={{fontSize:"12px",color:"#666"}}>Auto-saves on this device. Add to Home Screen to use like an app.</p>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<GroceryListApp />);
  </script>
</body>
</html>
